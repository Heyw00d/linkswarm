<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-51555HKGX4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-51555HKGX4');
    </script>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM & Agent Readiness Analyzer | LinkSwarm üêù</title>
    <meta name="description" content="Free tool to check if your website is ready for AI crawlers, LLMs, and autonomous agents. Get a score out of 10 with actionable recommendations.">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://linkswarm.ai/tools/readiness/">
    <meta property="og:title" content="LLM & Agent Readiness Analyzer | LinkSwarm">
    <meta property="og:description" content="Free tool to check if your website is ready for AI crawlers, LLMs, and autonomous agents. Get a score out of 10.">
    <meta property="og:image" content="https://linkswarm.ai/banner-1500x500.png">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@Link_Swarm">
    <meta name="twitter:title" content="LLM & Agent Readiness Analyzer | LinkSwarm">
    <meta name="twitter:description" content="Is your website ready for AI? Check your LLM and agent readiness score.">
    <meta name="twitter:image" content="https://linkswarm.ai/banner-1500x500.png">
    
    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "LLM & Agent Readiness Analyzer",
        "description": "Free tool to analyze website readiness for AI crawlers, LLMs, and autonomous agents",
        "url": "https://linkswarm.ai/tools/readiness/",
        "applicationCategory": "SEO Tool",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Organization",
            "name": "LinkSwarm",
            "url": "https://linkswarm.ai"
        }
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        honey: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            200: '#fde68a',
                            300: '#fcd34d',
                            400: '#fbbf24',
                            500: '#f59e0b',
                            600: '#d97706',
                            700: '#b45309',
                            800: '#92400e',
                            900: '#78350f',
                        },
                        swarm: {
                            900: '#0a0a0f',
                            800: '#12121a',
                            700: '#1a1a25',
                            600: '#252533',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        .swarm-bg {
            background: radial-gradient(ellipse at 50% 0%, rgba(251, 191, 36, 0.15) 0%, transparent 50%),
                        radial-gradient(ellipse at 80% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 40%);
        }
        
        .glow-honey {
            box-shadow: 0 0 40px rgba(251, 191, 36, 0.3);
        }
        
        .score-ring {
            transform: rotate(-90deg);
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.3); }
            50% { box-shadow: 0 0 40px rgba(251, 191, 36, 0.5); }
        }
        
        .analyzing {
            animation: pulse-glow 1.5s ease-in-out infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        .score-item {
            transition: all 0.3s ease;
        }
        
        .score-item:hover {
            transform: translateX(4px);
        }
    </style>
</head>
<body class="bg-swarm-900 text-white antialiased min-h-screen">
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-swarm-900/80 backdrop-blur-lg border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center gap-2 text-xl font-bold">
                    <span class="text-2xl">üêù</span>
                    <span class="bg-gradient-to-r from-honey-400 to-honey-500 bg-clip-text text-transparent">LinkSwarm</span>
                </a>
                <div class="hidden md:flex items-center gap-8">
                    <a href="/#how-it-works" class="text-gray-400 hover:text-honey-400 transition">How it Works</a>
                    <a href="/tools/readiness/" class="text-honey-400 font-medium">Readiness Analyzer</a>
                    <a href="/docs/" class="text-gray-400 hover:text-honey-400 transition">Docs</a>
                    <a href="/#early-access" class="bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-5 py-2 rounded-full transition">
                        Join the Swarm
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-16 px-6 swarm-bg min-h-screen">
        <div class="max-w-4xl mx-auto">
            
            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">
                    <span class="bg-gradient-to-r from-honey-400 to-honey-500 bg-clip-text text-transparent">LLM & Agent</span>
                    <br>Readiness Analyzer
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    Is your website ready for AI? Check if you're optimized for ChatGPT, Claude, Perplexity, and autonomous agents.
                </p>
            </div>
            
            <!-- Input Form -->
            <div class="bg-swarm-700 rounded-2xl p-8 mb-8 border border-white/5">
                <form id="analyzeForm" class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="domain" class="block text-sm text-gray-400 mb-2">Enter your domain</label>
                        <input 
                            type="text" 
                            id="domain" 
                            name="domain"
                            placeholder="example.com"
                            class="w-full bg-swarm-800 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-honey-500 focus:ring-1 focus:ring-honey-500 transition"
                            required
                        >
                    </div>
                    <div class="flex items-end">
                        <button 
                            type="submit" 
                            id="analyzeBtn"
                            class="w-full md:w-auto bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-8 py-3 rounded-xl transition flex items-center justify-center gap-2"
                        >
                            <span id="btnText">Analyze</span>
                            <svg id="btnSpinner" class="hidden w-5 h-5 spinner" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </button>
                    </div>
                </form>
                <p class="text-xs text-gray-500 mt-3">Free preview ‚Ä¢ Full results with free signup ‚Ä¢ Results in ~10 seconds</p>
            </div>
            
            <!-- Results Container (hidden initially) -->
            <div id="results" class="hidden">
                
                <!-- Score Overview -->
                <div class="bg-swarm-700 rounded-2xl p-8 mb-8 border border-white/5">
                    <div class="flex flex-col md:flex-row items-center gap-8">
                        
                        <!-- Total Score Circle -->
                        <div class="relative w-48 h-48">
                            <svg class="w-full h-full" viewBox="0 0 100 100">
                                <!-- Background circle -->
                                <circle cx="50" cy="50" r="45" fill="none" stroke="#1a1a25" stroke-width="8"/>
                                <!-- Score circle -->
                                <circle 
                                    id="scoreCircle"
                                    cx="50" cy="50" r="45" 
                                    fill="none" 
                                    stroke="#fbbf24" 
                                    stroke-width="8"
                                    stroke-linecap="round"
                                    stroke-dasharray="283"
                                    stroke-dashoffset="283"
                                    class="score-ring transition-all duration-1000"
                                />
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span id="totalScore" class="text-5xl font-bold text-honey-400">0</span>
                                <span class="text-gray-400">/10</span>
                            </div>
                        </div>
                        
                        <!-- Grade & Subscores -->
                        <div class="flex-1 text-center md:text-left">
                            <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
                                <span id="gradeBadge" class="text-4xl font-bold px-4 py-1 rounded-lg bg-honey-500/20 text-honey-400">--</span>
                                <span id="gradeLabel" class="text-xl text-gray-300">Analyzing...</span>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4 mt-6">
                                <div class="bg-swarm-800 rounded-xl p-4">
                                    <div class="text-sm text-gray-400 mb-1">ü§ñ LLM Readiness</div>
                                    <div class="text-2xl font-bold">
                                        <span id="llmScore">0</span><span class="text-gray-500 text-lg">/5</span>
                                    </div>
                                </div>
                                <div class="bg-swarm-800 rounded-xl p-4">
                                    <div class="text-sm text-gray-400 mb-1">üîß Agent Readiness</div>
                                    <div class="text-2xl font-bold">
                                        <span id="agentScore">0</span><span class="text-gray-500 text-lg">/5</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Detailed Breakdown (Gated for free users) -->
                <div id="breakdownSection" class="grid md:grid-cols-2 gap-6 mb-8 relative">
                    
                    <!-- LLM Breakdown -->
                    <div class="bg-swarm-700 rounded-2xl p-6 border border-white/5">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <span>ü§ñ</span> LLM Readiness Breakdown
                        </h3>
                        <div id="llmBreakdown" class="space-y-3">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <!-- Agent Breakdown -->
                    <div class="bg-swarm-700 rounded-2xl p-6 border border-white/5">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <span>üîß</span> Agent Readiness Breakdown
                        </h3>
                        <div id="agentBreakdown" class="space-y-3">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <!-- Gated overlay -->
                    <div id="breakdownGate" class="hidden absolute inset-0 bg-gradient-to-b from-transparent via-swarm-900/80 to-swarm-900 flex items-end justify-center pb-8 rounded-2xl">
                        <button onclick="showSignupModal()" class="bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-6 py-3 rounded-xl transition flex items-center gap-2">
                            <span>üîì</span> Sign up free to see full breakdown
                        </button>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div class="bg-swarm-700 rounded-2xl p-6 border border-white/5 mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                        <span>üí°</span> Recommendations
                        <span id="recCount" class="text-sm text-gray-500 font-normal"></span>
                    </h3>
                    <div id="recommendations" class="space-y-4">
                        <!-- Populated by JS -->
                    </div>
                    <!-- Gated recommendations message -->
                    <div id="recommendationsGate" class="hidden mt-4 p-4 bg-swarm-800 rounded-xl border border-honey-500/30 text-center">
                        <p class="text-gray-300 mb-3">üîí <span id="hiddenRecCount">3</span> more recommendations hidden</p>
                        <button onclick="showSignupModal()" class="bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-5 py-2 rounded-lg transition text-sm">
                            Unlock All Recommendations ‚Üí
                        </button>
                    </div>
                </div>
                
                <!-- How to Improve (Gated) -->
                <div id="improveSection" class="bg-gradient-to-br from-swarm-700 to-swarm-800 rounded-2xl p-6 border border-honey-500/20 mb-8 relative">
                    <h3 class="text-lg font-semibold mb-2 flex items-center gap-2">
                        <span>üöÄ</span> How to Improve Your Score
                    </h3>
                    <p class="text-gray-400 text-sm mb-4">Beyond technical fixes, these actions boost your LLM visibility:</p>
                    <div id="howToImprove" class="grid md:grid-cols-2 gap-4">
                        <!-- Populated by JS -->
                    </div>
                    <!-- Gated overlay -->
                    <div id="improveGate" class="hidden absolute inset-0 bg-gradient-to-b from-transparent via-swarm-900/80 to-swarm-900 flex items-end justify-center pb-8 rounded-2xl">
                        <button onclick="showSignupModal()" class="bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-6 py-3 rounded-xl transition flex items-center gap-2">
                            <span>üîì</span> Sign up free to see improvement tips
                        </button>
                    </div>
                </div>
                
                <!-- CTA -->
                <div class="bg-gradient-to-r from-honey-500/20 to-purple-500/20 rounded-2xl p-8 text-center border border-honey-500/30">
                    <h3 class="text-2xl font-bold mb-3">Want AI to cite your brand?</h3>
                    <p class="text-gray-300 mb-6 max-w-xl mx-auto">
                        LinkSwarm helps you build the authority signals that get your brand mentioned by ChatGPT, Claude, and Perplexity.
                    </p>
                    <a href="/#early-access" class="inline-block bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold px-8 py-3 rounded-xl transition">
                        Join LinkSwarm ‚Üí
                    </a>
                </div>
            </div>
            
            <!-- Error State -->
            <div id="errorState" class="hidden bg-red-500/10 border border-red-500/30 rounded-2xl p-8 text-center">
                <div class="text-4xl mb-4">üòµ</div>
                <h3 class="text-xl font-bold text-red-400 mb-2">Analysis Failed</h3>
                <p id="errorMessage" class="text-gray-400">Could not analyze this domain. Please check the URL and try again.</p>
            </div>
            
            <!-- What We Check -->
            <div class="mt-16">
                <h2 class="text-2xl font-bold text-center mb-8">What We Check</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-swarm-700/50 rounded-xl p-6 border border-white/5">
                        <h3 class="font-semibold text-honey-400 mb-3">ü§ñ LLM Readiness (7 pts ‚Üí normalized to 5)</h3>
                        <ul class="space-y-2 text-gray-300 text-sm">
                            <li>‚Ä¢ <strong>llms.txt</strong> - Structured site summary for LLMs</li>
                            <li>‚Ä¢ <strong>ai.txt</strong> - AI crawler directives</li>
                            <li>‚Ä¢ <strong>Schema.org</strong> - JSON-LD structured data</li>
                            <li>‚Ä¢ <strong>FAQ Schema</strong> - FAQPage markup (bonus)</li>
                            <li>‚Ä¢ <strong>Meta tags</strong> - OG tags, descriptions</li>
                            <li>‚Ä¢ <strong>Semantic HTML</strong> - Proper heading hierarchy</li>
                            <li>‚Ä¢ <strong>sitemap.xml</strong> - Content discovery</li>
                            <li>‚Ä¢ <strong>robots.txt</strong> - AI crawler rules</li>
                            <li>‚Ä¢ <strong>Readability</strong> - Flesch score (60+ is good)</li>
                            <li>‚Ä¢ <strong>Semantic URLs</strong> - Natural language slugs</li>
                            <li>‚Ä¢ <strong>Date signals</strong> - dateModified/datePublished</li>
                            <li>‚Ä¢ <strong>Content depth</strong> - Word count, lists, tables</li>
                        </ul>
                    </div>
                    <div class="bg-swarm-700/50 rounded-xl p-6 border border-white/5">
                        <h3 class="font-semibold text-honey-400 mb-3">üîß Agent Readiness (5 pts)</h3>
                        <ul class="space-y-2 text-gray-300 text-sm">
                            <li>‚Ä¢ <strong>WebMCP</strong> - Web-based MCP integration</li>
                            <li>‚Ä¢ <strong>MCP Server</strong> - /.well-known/mcp.json</li>
                            <li>‚Ä¢ <strong>API Docs</strong> - Developer documentation</li>
                            <li>‚Ä¢ <strong>OAuth</strong> - Authentication standards</li>
                            <li>‚Ä¢ <strong>Action Schemas</strong> - Schema.org actions</li>
                            <li>‚Ä¢ <strong>A2A Protocol</strong> - Agent-to-agent support</li>
                            <li>‚Ä¢ <strong>Entity ID</strong> - Clear organization identity</li>
                        </ul>
                    </div>
                </div>
                <p class="text-center text-gray-500 text-sm mt-4">Based on Ziff Davis AEO research showing semantic URLs get 11.4% more LLM citations</p>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="border-t border-white/5 py-8 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üêù</span>
                <span class="font-semibold text-honey-400">LinkSwarm</span>
            </div>
            <div class="flex items-center gap-6 text-sm text-gray-400">
                <a href="/" class="hover:text-honey-400 transition">Home</a>
                <a href="/docs/" class="hover:text-honey-400 transition">Docs</a>
                <a href="https://x.com/Link_Swarm" class="hover:text-honey-400 transition">Twitter</a>
                <a href="https://discord.gg/6RzUpUbMFE" class="hover:text-honey-400 transition">Discord</a>
            </div>
            <div class="text-sm text-gray-500">
                ¬© 2025 LinkSwarm
            </div>
        </div>
    </footer>

    <script>
        const form = document.getElementById('analyzeForm');
        const domainInput = document.getElementById('domain');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const btnText = document.getElementById('btnText');
        const btnSpinner = document.getElementById('btnSpinner');
        const results = document.getElementById('results');
        const errorState = document.getElementById('errorState');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const domain = domainInput.value.trim().replace(/^https?:\/\//, '').replace(/\/$/, '');
            
            if (!domain) return;
            
            // Show loading state
            analyzeBtn.disabled = true;
            btnText.textContent = 'Analyzing...';
            btnSpinner.classList.remove('hidden');
            results.classList.add('hidden');
            errorState.classList.add('hidden');
            
            try {
                const response = await fetch('https://api.linkswarm.ai/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ domain })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Analysis failed');
                }
                
                displayResults(data);
                
            } catch (error) {
                console.error('Analysis error:', error);
                errorState.classList.remove('hidden');
                document.getElementById('errorMessage').textContent = error.message;
            } finally {
                analyzeBtn.disabled = false;
                btnText.textContent = 'Analyze';
                btnSpinner.classList.add('hidden');
            }
        });
        
        function displayResults(data) {
            results.classList.remove('hidden');
            
            // Animate score circle
            const scoreCircle = document.getElementById('scoreCircle');
            const circumference = 283; // 2 * œÄ * 45
            const offset = circumference - (data.scores.total / 10) * circumference;
            scoreCircle.style.strokeDashoffset = offset;
            scoreCircle.style.stroke = data.grade.color;
            
            // Update scores
            document.getElementById('totalScore').textContent = data.scores.total.toFixed(1);
            document.getElementById('llmScore').textContent = data.scores.llm.toFixed(1);
            document.getElementById('agentScore').textContent = data.scores.agent.toFixed(1);
            
            // Update grade
            document.getElementById('gradeBadge').textContent = data.grade.letter;
            document.getElementById('gradeBadge').style.color = data.grade.color;
            document.getElementById('gradeBadge').style.backgroundColor = data.grade.color + '20';
            document.getElementById('gradeLabel').textContent = data.grade.label;
            
            // Render LLM breakdown
            const llmBreakdown = document.getElementById('llmBreakdown');
            llmBreakdown.innerHTML = '';
            for (const [name, item] of Object.entries(data.breakdown.llm.items)) {
                llmBreakdown.appendChild(createScoreItem(name, item.score, item.max));
            }
            
            // Render Agent breakdown
            const agentBreakdown = document.getElementById('agentBreakdown');
            agentBreakdown.innerHTML = '';
            for (const [name, item] of Object.entries(data.breakdown.agent.items)) {
                agentBreakdown.appendChild(createScoreItem(name, item.score, item.max));
            }
            
            // Render recommendations
            const recommendations = document.getElementById('recommendations');
            recommendations.innerHTML = '';
            
            if (data.recommendations.length === 0) {
                recommendations.innerHTML = '<p class="text-green-400">üéâ Great job! No critical improvements needed.</p>';
            } else {
                for (const rec of data.recommendations) {
                    recommendations.appendChild(createRecommendation(rec));
                }
            }
            
            // Render How to Improve
            const howToImprove = document.getElementById('howToImprove');
            howToImprove.innerHTML = '';
            
            if (data.howToImprove && data.howToImprove.length > 0) {
                for (const item of data.howToImprove) {
                    howToImprove.appendChild(createImproveItem(item));
                }
            }
            
            // Scroll to results
            results.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function createScoreItem(name, score, max) {
            const div = document.createElement('div');
            div.className = 'score-item flex items-center justify-between bg-swarm-800 rounded-lg px-4 py-2';
            
            const passed = score >= max * 0.5;
            const full = score >= max;
            
            div.innerHTML = `
                <span class="text-sm ${passed ? 'text-gray-200' : 'text-gray-400'}">${name}</span>
                <span class="flex items-center gap-2">
                    <span class="text-sm font-medium ${full ? 'text-green-400' : passed ? 'text-honey-400' : 'text-gray-500'}">${score.toFixed(1)}/${max}</span>
                    <span class="text-lg">${full ? '‚úÖ' : passed ? 'üü°' : '‚ùå'}</span>
                </span>
            `;
            
            return div;
        }
        
        function createRecommendation(rec) {
            const div = document.createElement('div');
            div.className = 'bg-swarm-800 rounded-lg p-4 border-l-4 ' + 
                (rec.priority === 'high' ? 'border-red-500' : rec.priority === 'medium' ? 'border-honey-500' : 'border-gray-500');
            
            const priorityBadge = rec.priority === 'high' 
                ? '<span class="bg-red-500/20 text-red-400 text-xs px-2 py-0.5 rounded">High Priority</span>'
                : rec.priority === 'medium'
                    ? '<span class="bg-honey-500/20 text-honey-400 text-xs px-2 py-0.5 rounded">Medium</span>'
                    : '<span class="bg-gray-500/20 text-gray-400 text-xs px-2 py-0.5 rounded">Low</span>';
            
            const categoryIcon = rec.category === 'llm' ? 'ü§ñ' : 'üîß';
            
            div.innerHTML = `
                <div class="flex items-start justify-between gap-2 mb-2">
                    <h4 class="font-medium">${categoryIcon} ${rec.title}</h4>
                    ${priorityBadge}
                </div>
                <p class="text-sm text-gray-400 mb-2">${rec.description}</p>
                ${rec.link ? `<a href="${rec.link}" target="_blank" class="text-sm text-honey-400 hover:underline">Learn more ‚Üí</a>` : ''}
            `;
            
            return div;
        }
        
        function createImproveItem(item) {
            const div = document.createElement('div');
            div.className = 'bg-swarm-800/50 rounded-lg p-4 hover:bg-swarm-800 transition';
            
            const impactColors = {
                'very high': 'text-green-400 bg-green-500/20',
                'high': 'text-honey-400 bg-honey-500/20',
                'medium': 'text-blue-400 bg-blue-500/20',
                'low': 'text-gray-400 bg-gray-500/20'
            };
            
            const categoryIcons = {
                'directory': 'üìÅ',
                'content': 'üìù',
                'offsite': 'üîó',
                'aeo': 'üéØ',
                'technical': '‚öôÔ∏è'
            };
            
            const impactClass = impactColors[item.impact] || impactColors['medium'];
            const icon = categoryIcons[item.category] || 'üí°';
            
            div.innerHTML = `
                <div class="flex items-start gap-3">
                    <span class="text-xl">${icon}</span>
                    <div class="flex-1">
                        <div class="flex items-center justify-between gap-2 mb-1">
                            <h4 class="font-medium text-sm">${item.title}</h4>
                            <span class="text-xs px-2 py-0.5 rounded ${impactClass}">${item.impact} impact</span>
                        </div>
                        <p class="text-xs text-gray-400 mb-2">${item.description}</p>
                        ${item.link ? `<a href="${item.link}" target="_blank" class="text-xs text-honey-400 hover:underline">Take action ‚Üí</a>` : ''}
                    </div>
                </div>
            `;
            
            return div;
        }
        
        // Check for domain in URL params
        const urlParams = new URLSearchParams(window.location.search);
        const domainParam = urlParams.get('domain');
        if (domainParam) {
            domainInput.value = domainParam;
            form.dispatchEvent(new Event('submit'));
        }
        
        // Check if user is logged in
        function isLoggedIn() {
            return !!localStorage.getItem('linkswarm_api_key');
        }
        
        // Apply gating based on login status
        function applyGating(totalRecs) {
            const loggedIn = isLoggedIn();
            
            // Gate the breakdowns
            const breakdownGate = document.getElementById('breakdownGate');
            const breakdownSection = document.getElementById('breakdownSection');
            if (!loggedIn) {
                breakdownGate.classList.remove('hidden');
                breakdownSection.style.minHeight = '200px';
            } else {
                breakdownGate.classList.add('hidden');
            }
            
            // Gate the improvement tips
            const improveGate = document.getElementById('improveGate');
            const improveSection = document.getElementById('improveSection');
            if (!loggedIn) {
                improveGate.classList.remove('hidden');
                improveSection.style.minHeight = '200px';
            } else {
                improveGate.classList.add('hidden');
            }
            
            // Gate recommendations (show only 2 for free users)
            const recommendationsGate = document.getElementById('recommendationsGate');
            const recCount = document.getElementById('recCount');
            const hiddenRecCount = document.getElementById('hiddenRecCount');
            
            if (!loggedIn && totalRecs > 2) {
                recommendationsGate.classList.remove('hidden');
                hiddenRecCount.textContent = totalRecs - 2;
                recCount.textContent = '(showing 2 of ' + totalRecs + ')';
            } else {
                recommendationsGate.classList.add('hidden');
                recCount.textContent = '';
            }
        }
        
        // Show signup modal
        function showSignupModal() {
            document.getElementById('signupModal').classList.remove('hidden');
        }
        
        // Close signup modal
        function closeSignupModal() {
            document.getElementById('signupModal').classList.add('hidden');
        }
        
        // Handle signup
        async function handleSignup() {
            const email = document.getElementById('signupEmail').value.trim();
            const acceptTerms = document.getElementById('acceptTerms').checked;
            const joinMailingList = document.getElementById('joinMailingList').checked;
            const btn = document.getElementById('signupBtn');
            const error = document.getElementById('signupError');
            const success = document.getElementById('signupSuccess');
            
            if (!email || !email.includes('@')) {
                error.textContent = 'Please enter a valid email';
                error.classList.remove('hidden');
                return;
            }
            
            if (!acceptTerms) {
                error.textContent = 'Please accept the Terms of Service';
                error.classList.remove('hidden');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Signing up...';
            error.classList.add('hidden');
            
            try {
                const res = await fetch('https://api.linkswarm.ai/waitlist', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        email, 
                        source: 'readiness-tool',
                        acceptedTerms: true,
                        mailingList: joinMailingList
                    })
                });
                
                const data = await res.json();
                
                if (res.ok) {
                    if (data.verified && data.apiKey) {
                        // Already verified - save and unlock
                        localStorage.setItem('linkswarm_api_key', data.apiKey);
                        success.textContent = 'Welcome back! Unlocking full results...';
                        success.classList.remove('hidden');
                        setTimeout(() => {
                            closeSignupModal();
                            applyGating(0); // Remove all gates
                            location.reload(); // Refresh to show full results
                        }, 1500);
                    } else {
                        // Need verification
                        success.innerHTML = 'üìß Check your email for verification!<br><small class="text-gray-400">After verifying, refresh this page.</small>';
                        success.classList.remove('hidden');
                        btn.textContent = 'Check Email';
                        btn.disabled = false;
                    }
                } else {
                    throw new Error(data.error || 'Signup failed');
                }
            } catch (e) {
                error.textContent = e.message || 'Something went wrong';
                error.classList.remove('hidden');
                btn.textContent = 'Sign Up Free';
                btn.disabled = false;
            }
        }
        
        // Modify displayResults to apply gating
        const originalDisplayResults = displayResults;
        displayResults = function(data) {
            const loggedIn = isLoggedIn();
            
            // Limit recommendations for free users
            let recsToShow = data.recommendations;
            const totalRecs = data.recommendations.length;
            
            if (!loggedIn && totalRecs > 2) {
                recsToShow = data.recommendations.slice(0, 2);
            }
            
            // Replace recommendations temporarily
            const originalRecs = data.recommendations;
            data.recommendations = recsToShow;
            
            // Call original function
            originalDisplayResults(data);
            
            // Restore original
            data.recommendations = originalRecs;
            
            // Apply gating UI
            applyGating(totalRecs);
        };
    </script>
    
    <!-- Signup Modal -->
    <div id="signupModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-swarm-800 rounded-2xl p-8 max-w-md w-full border border-honey-500/30 relative">
            <button onclick="closeSignupModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
            
            <div class="text-center mb-6">
                <span class="text-4xl">üêù</span>
                <h3 class="text-2xl font-bold mt-2">Unlock Full Results</h3>
                <p class="text-gray-400 mt-2">Sign up free to see all recommendations and detailed breakdowns</p>
            </div>
            
            <div class="space-y-4">
                <input 
                    type="email" 
                    id="signupEmail" 
                    placeholder="you@example.com" 
                    class="w-full bg-swarm-900 border border-gray-700 rounded-lg px-4 py-3 focus:border-honey-500 focus:outline-none"
                    onkeypress="if(event.key==='Enter')handleSignup()"
                >
                
                <!-- Checkboxes -->
                <div class="space-y-3 text-sm">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="acceptTerms" class="mt-1 w-4 h-4 rounded border-gray-600 bg-swarm-900 text-honey-500 focus:ring-honey-500 focus:ring-offset-0">
                        <span class="text-gray-400">I agree to the <a href="/terms/" target="_blank" class="text-honey-400 hover:underline">Terms of Service</a> and <a href="/privacy/" target="_blank" class="text-honey-400 hover:underline">Privacy Policy</a> <span class="text-red-400">*</span></span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="joinMailingList" checked class="mt-1 w-4 h-4 rounded border-gray-600 bg-swarm-900 text-honey-500 focus:ring-honey-500 focus:ring-offset-0">
                        <span class="text-gray-400">Send me AI visibility tips & product updates</span>
                    </label>
                </div>
                
                <button 
                    id="signupBtn"
                    onclick="handleSignup()" 
                    class="w-full bg-honey-500 hover:bg-honey-400 text-swarm-900 font-semibold py-3 rounded-lg transition"
                >
                    Sign Up Free
                </button>
                <p id="signupError" class="hidden text-red-400 text-sm text-center"></p>
                <p id="signupSuccess" class="hidden text-green-400 text-sm text-center"></p>
            </div>
            
            <div class="mt-6 text-center text-sm text-gray-500">
                Already have an account? <a href="/dashboard/" class="text-honey-400 hover:underline">Log in</a>
            </div>
            
            <div class="mt-4 pt-4 border-t border-gray-700">
                <p class="text-xs text-gray-500 text-center">
                    ‚úì Full score breakdown &nbsp; ‚úì All recommendations &nbsp; ‚úì Improvement tips
                </p>
            </div>
        </div>
    </div>
</body>
</html>
